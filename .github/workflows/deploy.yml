# name: Fullstack CI/CD

# on:
#   push:
#     branches: [ "main" ]
#   pull_request:
#     branches: [ "main" ]

# jobs:
#   build:

#     runs-on: ubuntu-latest

#     strategy:
#       matrix:
#         node-version: [18.x]

#     steps:
#     # Checkout the code
#     - uses: actions/checkout@v4

#     # Setup Node.js
#     - name: Setup Node.js
#       uses: actions/setup-node@v4
#       with:
#         node-version: ${{ matrix.node-version }}
#         cache: 'npm'

#     # -------------------------
#     # Backend: Install & Test
#     # -------------------------
#     - name: Install Backend Dependencies
#       run: |
#         cd backend
#         npm ci

#     - name: Build Backend (if any build step)
#       run: |
#         cd backend
#         npm run build --if-present

#     - name: Test Backend
#       run: |
#         cd backend
#         npm test

#     # -------------------------
#     # Frontend: Install & Build
#     # -------------------------
#     - name: Install Frontend Dependencies
#       run: |
#         cd frontend
#         npm ci

#     - name: Build Frontend
#       run: |
#         cd frontend
#         npm run build

#     # -------------------------
#     # Deploy Frontend to Netlify
#     # -------------------------
#     - name: Deploy Frontend to Netlify
#       uses: nwtgck/actions-netlify@v1.2
#       with:
#         publish-dir: ./frontend/build
#         production-branch: main
#         github-token: ${{ secrets.GITHUB_TOKEN }}
#         netlify-auth-token: ${{ secrets.NETLIFY_AUTH_TOKEN }}
#         netlify-site-id: ${{ secrets.NETLIFY_SITE_ID }}

#     # -------------------------
#     # Deploy Backend to Render
#     # -------------------------
#     - name: Deploy Backend to Render
#       run: |
#         curl -X POST \
#           -H "Authorization: Bearer ${{ secrets.RENDER_API_KEY }}" \
#           -H "Content-Type: application/json" \
#           -d '{"clearCache": true}' \
#           https://api.render.com/deploy/srv-xxxxxxxxxxxx
